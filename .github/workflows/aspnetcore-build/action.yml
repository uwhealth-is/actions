name: ASP.NET Core Build
description: Build an ASP.NET Core application
inputs:
  project_name:
    required: true
  nuget_config: 
    required: false
    default: 'Nuget.config'
    
runs:
  using: "composite"
  steps:   
    - name: Initialize cache
      uses: actions/cache@v3
      with:
        path: ~/.nuget/packages
        key: ${{ runner.os }}-nuget-${{ hashFiles('**/packages.lock.json') }}

    - name: Restore NuGet packages
      shell: bash
      run: dotnet restore --configfile ${{ inputs.nuget_config }}    
    
    - name: Restore npm packages
      shell: bash
      run: cd ${{ inputs.project_name }} && npm install

    - name: Build
      shell: bash
      run: dotnet build --configuration Release
